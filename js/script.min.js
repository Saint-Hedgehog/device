var showNavigationLink=document.querySelector(".catalog-button"),showNavigationLinkHover=document.querySelector(".catalog-button-hover"),showNavigation=document.querySelector(".site-nav__sublist");showNavigationLinkHover.classList.remove("catalog-button-hover"),showNavigationLink.addEventListener("click",function(e){e.preventDefault(),showNavigation.classList.toggle("sublist-visible")});var servicesControls=document.querySelector(".services__controls"),servicesLinks=document.querySelectorAll(".services__switch"),servicesItems=document.querySelectorAll(".services__item");servicesControls.addEventListener("click",function(e){e.preventDefault();var o=e.target;if(o.classList.contains("services__switch")){for(var a=0;a<servicesItems.length;a++)servicesItems[a].classList.remove("services__item-show"),servicesLinks[a].classList.remove("services__switch-active");o.classList.add("services__switch-active"),document.querySelector(".services__item-"+o.id).classList.add("services__item-show")}});var feedbackButton=document.querySelector(".feedback-button"),linkMap=document.querySelector(".map"),modalForm=document.querySelector(".modal-feedback"),modalMap=document.querySelector(".modal-map"),overlay=document.querySelector(".modal-overlay"),formClose=modalForm.querySelector(".modal-close"),mapClose=modalMap.querySelector(".modal-close"),feedbackForm=modalForm.querySelector(".modal-feedback__form"),modalFormName=modalForm.querySelector(".modal-feedback-form__input-name"),modalFormEmail=modalForm.querySelector(".modal-feedback-form__input-email"),modalFormComment=modalForm.querySelector(".modal-feedback-form__input-comment"),fields=modalForm.querySelectorAll(".modal-feedback-form__input"),isStorageSupport=!0,nameStorage="",emailStorage="";try{nameStorage=localStorage.getItem("name"),emailStorage=localStorage.getItem("email")}catch(e){isStorageSupport=!1}function checkName(){modalFormName.value?modalFormName.classList.remove("error"):modalFormName.classList.add("error")}function checkEmail(){modalFormEmail.value?modalFormEmail.classList.remove("error"):modalFormEmail.classList.add("error")}function checkComment(){modalFormComment.value?modalFormComment.classList.remove("error"):modalFormComment.classList.add("error")}feedbackButton.addEventListener("click",function(e){e.preventDefault(),modalForm.classList.remove("modal-out"),overlay.style.display="block",modalForm.classList.add("modal-show"),modalFormName.focus(),nameStorage&&(modalFormName.value=nameStorage,modalFormEmail.focus()),emailStorage&&(modalFormEmail.value=emailStorage,modalFormComment.focus())}),formClose.addEventListener("click",function(e){e.preventDefault(),modalForm.classList.add("modal-out"),setTimeout(function(){modalForm.classList.remove("modal-show"),modalForm.classList.remove("modal-error"),overlay.style.display=""},800)}),linkMap.addEventListener("click",function(e){e.preventDefault(),modalMap.classList.remove("modal-out"),overlay.style.display="block",modalMap.classList.add("modal-show")}),mapClose.addEventListener("click",function(e){e.preventDefault(),modalMap.classList.add("modal-out"),setTimeout(function(){modalMap.classList.remove("modal-show"),overlay.style.display=""},800)}),modalFormName.addEventListener("change",function(){checkName()}),modalFormEmail.addEventListener("change",function(){checkEmail()}),modalFormComment.addEventListener("change",function(){checkComment()}),feedbackForm.addEventListener("submit",function(e){modalFormName.value&&modalFormEmail.value&&modalFormComment.value?isStorageSupport&&(localStorage.setItem("name",modalFormName.value),localStorage.setItem("email",modalFormEmail.value)):(e.preventDefault(),modalForm.classList.remove("modal-error"),modalForm.offsetWidth,modalForm.classList.add("modal-error")),checkName(),checkEmail(),checkComment()}),window.addEventListener("keydown",function(e){27===e.keyCode&&(modalForm.classList.contains("modal-show")&&(e.preventDefault(),modalForm.classList.add("modal-out"),setTimeout(function(){modalForm.classList.remove("modal-show"),modalForm.classList.remove("modal-error"),overlay.style.display=""},800)),modalMap.classList.contains("modal-show")&&(e.preventDefault(),modalMap.classList.add("modal-out"),setTimeout(function(){modalMap.classList.remove("modal-show"),overlay.style.display=""},800)))});
